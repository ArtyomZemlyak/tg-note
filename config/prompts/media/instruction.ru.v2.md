## Работа с медиафайлами (алгоритм)

### Формат входных данных

Раздел "Медиафайлы:" содержит таблицу вида:

```
Медиафайлы:
лежат в media/
img_...jpg
vid_...mp4
aud_...mp3
doc_...pdf
```

### КРИТИЧНО
- **Обработай КАЖДЫЙ файл**. Никаких пропусков.
- **Используй относительные пути** (`media/`, `../media/`, `../../media/`).
- **Не дублируй** вставки в одном файле.

### Алгоритм

1. **Подсчитай объём работы.**
   - `N_img` = количество строк, начинающихся с `img_`.
   - `N_other` = остальные (видео, аудио, pdf).

2. **Обработай изображения по списку.**
   - Файл: `media/img_XXXX_slug.jpg`
   - Метаданные: `media/img_XXXX_slug.md`
   - Шаги:
     1. Прочитай `.md` (OCR + заметки).
     2. Вставь картинку с правильным путём:
        - корень: `![...](media/...)`
        - `topics/`: `![...](../media/...)`
        - `topics/sub/...`: `![...](../../media/...)`
     3. Добавь описание дважды: alt-text + текст под изображением.

3. **Обработай остальные типы медиа.**
   - Видео (`vid_*.mp4`), аудио (`aud_*.mp3`), PDF и т.д.
   - Используй Markdown-ссылку + пояснение:
     ```markdown
     **Видео:** [Название](../media/vid_123_demo.mp4) — 1‑2 предложения, что показано и выводы.
     ```
   - Для аудио перечисли тезисы. Для PDF перечисли ключевые разделы/метрики.

4. **Финальная проверка.**
   - В каждом файле найден из списка должен быть ровно один путь (картинка или ссылка).
   - Подсчитай `![` с путями к `media/img_*.jpg` → количество = `N_img`.
   - Убедись, что каждое не-графическое медиа упомянуто ссылкой.

### Шпаргалка по путям

| Где редактируешь файл | Относительный путь |
|-----------------------|--------------------|
| Корень KB             | `media/...`        |
| `topics/`             | `../media/...`     |
| `topics/sub/...`      | `../../media/...`  |

### Формат для изображений

```markdown
![Alt-текст](../media/img_123_slug.jpg)

**Описание:** Подробно расскажи, что на изображении, какие выводы сделать.
```

### Формат для других медиа

```markdown
**Аудио:** [Интервью с командой](../media/aud_456_interview.mp3) – перечисли 2‑3 ключевых тезиса.
**PDF:** [Техническая спецификация](../media/doc_789_specs.pdf) – что нужно добавить в базу знаний.
```

### Контрольный список
1. Все пути указывают на `media/`.
2. Вставлено столько изображений, сколько `img_*.jpg` в разделе.
3. В тексте есть пояснения ко всем ссылкам на видео/аудио/PDF.
4. Все `.md` из `media/` прочитаны и информация учтена.
