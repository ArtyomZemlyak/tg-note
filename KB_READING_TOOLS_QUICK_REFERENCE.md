# Knowledge Base Reading Tools - Quick Reference

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```python
from src.agents.autonomous_agent import AutonomousAgent
from pathlib import Path

# –°–æ–∑–¥–∞—Ç—å –∞–≥–µ–Ω—Ç–∞ —Å KB
agent = AutonomousAgent(
    llm_connector=None,  # –∏–ª–∏ –≤–∞—à LLM connector
    kb_root_path=Path("./my_knowledge_base")
)

# –í—Å–µ 4 —Ç—É–ª–∑—ã –¥–æ—Å—Ç—É–ø–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!
```

---

## üìñ kb_read_file - –ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –ß–∏—Ç–∞–µ—Ç –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤ –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ù—É–∂–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–µ—Ä–µ–¥ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

```python
result = await agent._tool_kb_read_file({
    "paths": ["topics/ai/neural-networks.md", "topics/ai/deep-learning.md"]
})

# result["results"][0]["content"] - —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–µ—Ä–≤–æ–≥–æ —Ñ–∞–π–ª–∞
# result["results"][0]["size"] - —Ä–∞–∑–º–µ—Ä –≤ –±–∞–π—Ç–∞—Ö
```

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
- `success`: boolean
- `files_read`: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤  
- `results`: –º–∞—Å—Å–∏–≤ —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
- `errors`: –æ—à–∏–±–∫–∏ –ø–æ –∫–∞–∂–¥–æ–º—É —Ñ–∞–π–ª—É (–µ—Å–ª–∏ –µ—Å—Ç—å)

---

## üìÅ kb_list_directory - –°–ø–∏—Å–æ–∫ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –ø–∞–ø–∫–∏

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –ü–µ—Ä–µ—á–∏—Å–ª—è–µ—Ç —Ñ–∞–π–ª—ã –∏ –ø–∞–ø–∫–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É KB
- –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –°–æ–±—Ä–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

```python
# –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –≤ –ø–∞–ø–∫–µ (–Ω–µ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ)
result = await agent._tool_kb_list_directory({
    "path": "topics/ai",
    "recursive": False
})

# –í—Å–µ —Ñ–∞–π–ª—ã –∏ –ø–æ–¥–ø–∞–ø–∫–∏ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ
result = await agent._tool_kb_list_directory({
    "path": "topics",
    "recursive": True
})

# result["files"] - —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤
# result["directories"] - —Å–ø–∏—Å–æ–∫ –ø–∞–ø–æ–∫
```

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
- `success`: boolean
- `files`: –º–∞—Å—Å–∏–≤ —Ñ–∞–π–ª–æ–≤ —Å —Ä–∞–∑–º–µ—Ä–∞–º–∏
- `directories`: –º–∞—Å—Å–∏–≤ –ø–∞–ø–æ–∫
- `file_count`: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤
- `directory_count`: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞–ø–æ–∫

---

## üîç kb_search_files - –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∞–º —Ñ–∞–π–ª–æ–≤

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –ò—â–µ—Ç —Ñ–∞–π–ª—ã –∏ –ø–∞–ø–∫–∏ –ø–æ glob-—à–∞–±–ª–æ–Ω—É

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ù–∞–π—Ç–∏ –≤—Å–µ —Ñ–∞–π–ª—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞
- –ò—Å–∫–∞—Ç—å —Ñ–∞–π–ª—ã –ø–æ —á–∞—Å—Ç–∏ –∏–º–µ–Ω–∏
- –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é

```python
# –í—Å–µ markdown —Ñ–∞–π–ª—ã
result = await agent._tool_kb_search_files({
    "pattern": "*.md"
})

# –§–∞–π–ª—ã —Å "neural" –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏
result = await agent._tool_kb_search_files({
    "pattern": "*neural*",
    "case_sensitive": False
})

# –í—Å–µ .md —Ñ–∞–π–ª—ã –≤ topics/ai/ –∏ –ø–æ–¥–ø–∞–ø–∫–∞—Ö
result = await agent._tool_kb_search_files({
    "pattern": "topics/ai/**/*.md"
})
```

**Glob —à–∞–±–ª–æ–Ω—ã:**
- `*` - –ª—é–±—ã–µ —Å–∏–º–≤–æ–ª—ã
- `?` - –æ–¥–∏–Ω —Å–∏–º–≤–æ–ª
- `**` - –ª—é–±—ã–µ –ø–æ–¥–ø–∞–ø–∫–∏
- `[abc]` - –æ–¥–∏–Ω –∏–∑ —Å–∏–º–≤–æ–ª–æ–≤ a, b, c

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
- `success`: boolean
- `files`: –Ω–∞–π–¥–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `directories`: –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –ø–∞–ø–∫–∏
- `file_count`: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤
- `directory_count`: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞–ø–æ–∫

---

## üîé kb_search_content - –ü–æ–∏—Å–∫ –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –ò—â–µ—Ç —Ç–µ–∫—Å—Ç –≤–Ω—É—Ç—Ä–∏ —Ñ–∞–π–ª–æ–≤ (full-text search)

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ù–∞–π—Ç–∏ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –∫–æ–Ω—Ü–µ–ø—Ç–∞/—Ç–µ–º—ã
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- –ù–∞–π—Ç–∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ç—å–∏

```python
# –ù–∞–π—Ç–∏ –≤—Å–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è "machine learning"
result = await agent._tool_kb_search_content({
    "query": "machine learning",
    "case_sensitive": False,
    "file_pattern": "*.md"
})

# –ü–æ–∏—Å–∫ —Ç–æ–ª—å–∫–æ –≤ AI –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
result = await agent._tool_kb_search_content({
    "query": "neural networks",
    "file_pattern": "topics/ai/**/*.md"
})

# result["matches"][0]["line_number"] - –Ω–æ–º–µ—Ä —Å—Ç—Ä–æ–∫–∏
# result["matches"][0]["context"] - –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤–æ–∫—Ä—É–≥ –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ
```

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
- `success`: boolean
- `matches`: –º–∞—Å—Å–∏–≤ —Ñ–∞–π–ª–æ–≤ —Å —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è–º–∏
  - `path`: –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É
  - `occurrences`: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Ö–æ–∂–¥–µ–Ω–∏–π
  - `matches`: –¥–æ 5 –ø–µ—Ä–≤—ã—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- `files_found`: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤ —Å —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è–º–∏

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–í—Å–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∑–∞—â–∏—â–µ–Ω—ã –æ—Ç:
- ‚úÖ Path traversal (`../../../etc/passwd`)
- ‚úÖ –î–æ—Å—Ç—É–ø–∞ –∑–∞ –ø—Ä–µ–¥–µ–ª—ã KB root
- ‚úÖ –ß—Ç–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

```python
# ‚ùå –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ
result = await agent._tool_kb_read_file({
    "paths": ["../../../etc/passwd"]
})
# result["success"] == False
# result["errors"][0]["error"] - "Path traversal (..) is not allowed"
```

---

## üéØ –¢–∏–ø–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

```python
# –ü–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –Ω–æ–≤–æ–π —Å—Ç–∞—Ç—å–∏ - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã
search = await agent._tool_kb_search_content({
    "query": "neural networks",
    "file_pattern": "topics/ai/*.md"
})

if search["files_found"] > 0:
    # –ï—Å—Ç—å –ø–æ—Ö–æ–∂–∏–µ —Å—Ç–∞—Ç—å–∏ - –ø—Ä–æ—á–∏—Ç–∞—Ç—å –∏—Ö
    files = await agent._tool_kb_read_file({
        "paths": [m["path"] for m in search["matches"]]
    })
    # –î–æ–ø–æ–ª–Ω–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –≤–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ê–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã KB

```python
# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
categories = await agent._tool_kb_list_directory({
    "path": "topics",
    "recursive": False
})

# –î–ª—è –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
for cat in categories["directories"]:
    stats = await agent._tool_kb_list_directory({
        "path": cat["path"],
        "recursive": True
    })
    print(f"{cat['name']}: {stats['file_count']} —Ñ–∞–π–ª–æ–≤")
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ü–æ–∏—Å–∫ —Å–≤—è–∑–µ–π

```python
# –ù–∞–π—Ç–∏ –≤—Å–µ —Ñ–∞–π–ª—ã —É–ø–æ–º–∏–Ω–∞—é—â–∏–µ "Python"
refs = await agent._tool_kb_search_content({
    "query": "Python"
})

# –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –≥—Ä–∞—Ñ —Å–≤—è–∑–µ–π
for match in refs["matches"]:
    print(f"{match['path']}: {match['occurrences']} —É–ø–æ–º–∏–Ω–∞–Ω–∏–π")
```

---

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**

| –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|-----------|-------------|
| `kb_read_file` | –ß–∏—Ç–∞–π—Ç–µ 5-20 —Ñ–∞–π–ª–æ–≤ –∑–∞ —Ä–∞–∑, –Ω–µ –±–æ–ª—å—à–µ |
| `kb_list_directory` | –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `recursive=false` –∫–æ–≥–¥–∞ –≤–æ–∑–º–æ–∂–Ω–æ |
| `kb_search_files` | –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã –ª—É—á—à–µ —á–µ–º `*` |
| `kb_search_content` | –£–∫–∞–∑—ã–≤–∞–π—Ç–µ `file_pattern` –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è |

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- `kb_search_content` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞–∫—Å–∏–º—É–º 5 —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π –Ω–∞ —Ñ–∞–π–ª
- –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ (–º–æ–≥—É—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–º–∏ –Ω–∞ –±–æ–ª—å—à–∏—Ö KB)

---

## üìù –ü—Ä–∏–º–µ—Ä—ã –≤ –∫–æ–¥–µ

–°–º. `examples/kb_reading_tools_example.py` –¥–ª—è –ø–æ–ª–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤:
- –ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
- –õ–∏—Å—Ç–∏–Ω–≥ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π  
- –ü–æ–∏—Å–∫ –ø–æ —à–∞–±–ª–æ–Ω–∞–º
- –ü–æ–∏—Å–∫ –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É
- –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–ó–∞–ø—É—Å—Ç–∏—Ç—å:
```bash
python examples/kb_reading_tools_example.py
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
pytest tests/test_kb_reading_tools.py -v
```

–¢–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç:
- ‚úÖ –ß—Ç–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –∏ –æ–±—ã—á–Ω—ã–π –ª–∏—Å—Ç–∏–Ω–≥
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ glob-—à–∞–±–ª–æ–Ω–∞–º
- ‚úÖ –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (path traversal)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

---

## üìö –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–º. `docs_site/agents/kb-reading-tools.md` –¥–ª—è:
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ü—Ä–∏–º–µ—Ä—ã JSON –æ—Ç–≤–µ—Ç–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LLM
- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –Ω–æ–≤—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏
