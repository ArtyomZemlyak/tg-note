# –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∞–≥–µ–Ω—Ç—Å–∫–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã - –ò—Ç–æ–≥–æ–≤–æ–µ —Ä–µ–∑—é–º–µ

## –ü—Ä–æ–±–ª–µ–º–∞

### –ò—Å—Ö–æ–¥–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è

–í –ø—Ä–æ–µ–∫—Ç–µ –±—ã–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –¥–≤–∞ —Ç–∏–ø–∞ –∞–≥–µ–Ω—Ç–æ–≤:

1. **QwenCodeCLIAgent** - –æ–±—ë—Ä—Ç–∫–∞ –Ω–∞–¥ qwen-code CLI
   - ‚ùå qwen CLI - —ç—Ç–æ —á—ë—Ä–Ω—ã–π —è—â–∏–∫, –∞–≥–µ–Ω—Ç –≤–Ω—É—Ç—Ä–∏ CLI
   - ‚ùå –ù–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ –ø—Ä–æ—Ü–µ—Å—Å–æ–º –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
   - ‚ùå –ù–µ–ª—å–∑—è –∫–∞—Å—Ç–æ–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã

2. **QwenCodeAgent** - Python-based –∞–≥–µ–Ω—Ç
   - ‚ùå –ü–ª–∞–Ω –∂—ë—Å—Ç–∫–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω –≤ `_create_todo_plan()`
   - ‚ùå LLM –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è –æ –≤—ã–∑–æ–≤–µ —Ç—É–ª–∑–æ–≤
   - ‚ùå –¢—É–ª–∑—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –ß—Ç–æ —Ç—Ä–µ–±–æ–≤–∞–ª–æ—Å—å

**–ù–∞—Å—Ç–æ—è—â–∞—è –∞–≥–µ–Ω—Ç—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**

```
1. –ó–∞–¥–∞—á–∞ ‚Üí –ê–≥–µ–Ω—Ç
2. –ê–≥–µ–Ω—Ç (LLM) ‚Üí –†–µ—à–µ–Ω–∏–µ (–≤—ã–∑–≤–∞—Ç—å —Ç—É–ª–∑ / –∑–∞–≤–µ—Ä—à–∏—Ç—å)
3. –û–±—Ä–∞–±–æ—Ç—á–∏–∫ ‚Üí –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç—É–ª–∑–∞ + –≤–∞–ª–∏–¥–∞—Ü–∏—è
4. –†–µ–∑—É–ª—å—Ç–∞—Ç ‚Üí –û–±—Ä–∞—Ç–Ω–æ –≤ –∞–≥–µ–Ω—Ç–∞ (–ø.2)
```

## –†–µ—à–µ–Ω–∏–µ

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    AUTONOMOUS AGENT                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Task       ‚îÇ ‚Üí Input
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Agent Loop (AutonomousAgent)            ‚îÇ
‚îÇ                                          ‚îÇ
‚îÇ  while not done:                         ‚îÇ
‚îÇ    decision = LLM.decide(context)        ‚îÇ
‚îÇ                                          ‚îÇ
‚îÇ    if decision == TOOL_CALL:             ‚îÇ
‚îÇ      result = execute_tool(...)          ‚îÇ
‚îÇ      context.add(result)                 ‚îÇ
‚îÇ                                          ‚îÇ
‚îÇ    elif decision == END:                 ‚îÇ
‚îÇ      return final_result                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Result     ‚îÇ ‚Üí Output
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### 1. `AutonomousAgent` (–±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å)

**–§–∞–π–ª:** `src/agents/autonomous_agent.py`

**–ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –∞–≤—Ç–æ–Ω–æ–º–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤
- ‚úÖ –†–µ–∞–ª–∏–∑—É–µ—Ç –∞–≥–µ–Ω—Ç—Å–∫–∏–π —Ü–∏–∫–ª (`_agent_loop`)
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º (`AgentContext`)
- ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç—É–ª–∑–æ–≤ (`_execute_tool`)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ Finalization —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

**–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
- `_make_decision()` - –¥–æ–ª–∂–Ω–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–∞–∂–¥–∞—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

#### 2. `OpenAIAgent` (–∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)

**–§–∞–π–ª:** `src/agents/openai_agent.py`

**–ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç OpenAI-compatible API
- ‚úÖ Function calling –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–∑–æ–≤–∞ —Ç—É–ª–∑–æ–≤
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ tool schema
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è `plan_todo`
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Qwen, OpenAI, OpenRouter

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –º–æ–¥–µ–ª–∏:**
- Qwen (dashscope.aliyuncs.com)
- OpenAI (api.openai.com)
- OpenRouter (openrouter.ai)
- –õ—é–±—ã–µ OpenAI-compatible API

#### 3. –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã

**AgentContext** - –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:
```python
@dataclass
class AgentContext:
    task: str
    executions: List[ToolExecution]
    errors: List[str]
    
    def add_execution(execution)
    def get_history() -> str
    def get_tools_used() -> List[str]
```

**AgentDecision** - —Ä–µ—à–µ–Ω–∏–µ LLM:
```python
@dataclass
class AgentDecision:
    action: ActionType  # TOOL_CALL | END
    reasoning: str
    tool_name: Optional[str]
    tool_params: Optional[Dict]
    final_result: Optional[str]
```

**ToolExecution** - —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç—É–ª–∑–∞:
```python
@dataclass
class ToolExecution:
    tool_name: str
    params: Dict
    result: Any
    success: bool
    error: Optional[str]
    timestamp: str
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π

#### AgentFactory –æ–±–Ω–æ–≤–ª—ë–Ω

**–§–∞–π–ª:** `src/agents/agent_factory.py`

–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤–æ–≥–æ —Ç–∏–ø–∞ –∞–≥–µ–Ω—Ç–∞:

```python
AGENT_TYPES = {
    "stub": StubAgent,
    "qwen_code": QwenCodeAgent,
    "qwen_code_cli": QwenCodeCLIAgent,
    "openai": OpenAIAgent,  # ‚Üê –ù–û–í–´–ô
}
```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```python
agent = AgentFactory.create_agent(
    agent_type="openai",
    config={...}
)
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```python
from src.agents.openai_agent import OpenAIAgent

# 1. –°–æ–∑–¥–∞—Ç—å –∞–≥–µ–Ω—Ç–∞
agent = OpenAIAgent(
    api_key="your-api-key",
    base_url="https://dashscope.aliyuncs.com/compatible-mode/v1",
    model="qwen-max",
    max_iterations=10
)

# 2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç—É–ª–∑—ã
async def web_search_tool(params: dict) -> dict:
    query = params["query"]
    # –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ –ø–æ–∏—Å–∫–∞
    return {"success": True, "results": [...]}

agent.register_tool("web_search", web_search_tool)
agent.register_tool("file_create", file_create_tool)
agent.register_tool("folder_create", folder_create_tool)

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–≥–µ–Ω—Ç–∞
result = await agent.process({
    "text": "–°—Ç–∞—Ç—å—è –æ –º–∞—à–∏–Ω–Ω–æ–º –æ–±—É—á–µ–Ω–∏–∏...",
    "urls": ["https://example.com"]
})

# 4. –†–µ–∑—É–ª—å—Ç–∞—Ç
print(result['markdown'])  # –§–∏–Ω–∞–ª—å–Ω—ã–π markdown
print(result['metadata']['iterations'])  # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Ç–µ—Ä–∞—Ü–∏–π
print(result['metadata']['tools_used'])  # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç—É–ª–∑—ã
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**config.yaml:**
```yaml
AGENT_TYPE: "openai"
AGENT_MODEL: "qwen-max"
AGENT_MAX_ITERATIONS: 10
AGENT_INSTRUCTION: |
  –¢—ã –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π –∞–≥–µ–Ω—Ç...
```

**.env:**
```bash
OPENAI_API_KEY=your-api-key
OPENAI_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1
```

## –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### 1. –ê–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç—å

**–ë—ã–ª–æ:**
```python
# –ñ—ë—Å—Ç–∫–∏–π –ø–ª–∞–Ω
plan.add_task("Analyze content")
plan.add_task("Search web")  # –í—Å–µ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
```

**–°—Ç–∞–ª–æ:**
```python
# LLM —Å–∞–º —Ä–µ—à–∞–µ—Ç –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ
Iteration 1: LLM ‚Üí "–°–æ–∑–¥–∞—Ç—å –ø–ª–∞–Ω" ‚Üí plan_todo([...])
Iteration 2: LLM ‚Üí "–ù—É–∂–µ–Ω –∞–Ω–∞–ª–∏–∑" ‚Üí analyze_content(text)
Iteration 3: LLM ‚Üí "–•–≤–∞—Ç–∏—Ç, —Å–æ–∑–¥–∞—é —Ñ–∞–π–ª" ‚Üí file_create(...)
Iteration 4: LLM ‚Üí "–ì–æ—Ç–æ–≤–æ" ‚Üí END
```

### 2. –ì–∏–±–∫–æ—Å—Ç—å

- ‚úÖ –ê–≥–µ–Ω—Ç —Å–∞–º —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–ª–∞–Ω
- ‚úÖ –ê–≥–µ–Ω—Ç –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å –ø–ª–∞–Ω –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ
- ‚úÖ –ê–≥–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ —Ç—É–ª–∑—ã
- ‚úÖ –ê–≥–µ–Ω—Ç –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –∫ —Å–∏—Ç—É–∞—Ü–∏–∏

### 3. –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å

```python
# –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–π —Ç—É–ª–∑
async def my_custom_tool(params: dict) -> dict:
    # –í–∞—à–∞ –ª–æ–≥–∏–∫–∞
    return {"success": True, "result": "..."}

agent.register_tool("my_custom_tool", my_custom_tool)

# –ê–≥–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–≤–∏–¥–∏—Ç –Ω–æ–≤—ã–π —Ç—É–ª–∑
# –∏ —Å–º–æ–∂–µ—Ç –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
```

### 4. –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å

```python
# –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
result = await agent.process(content)

for execution in result['metadata']['executions']:
    print(f"{execution['tool_name']}: {execution['result']}")

# –õ–æ–≥–∏ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π
# –ú–µ—Ç—Ä–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç—É–ª–∑–æ–≤
# –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
```

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤

### qwen-code CLI

‚úÖ **–ü–ª—é—Å—ã:**
- –ì–æ—Ç–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ
- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ capabilities
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è Qwen

‚ùå **–ú–∏–Ω—É—Å—ã:**
- –ß—ë—Ä–Ω—ã–π —è—â–∏–∫
- –ù–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—è
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç Node.js

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –ë—ã—Å—Ç—Ä—ã–π –ø—Ä–æ—Ç–æ—Ç–∏–ø, –Ω–µ –Ω—É–∂–µ–Ω –∫–æ–Ω—Ç—Ä–æ–ª—å

### OpenAI Agent (–Ω–æ–≤—ã–π)

‚úÖ **–ü–ª—é—Å—ã:**
- –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å
- –ì–∏–±–∫–∞—è –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è
- –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–∞
- –°–≤–æ–∏ —Ç—É–ª–∑—ã

‚ùå **–ú–∏–Ω—É—Å—ã:**
- –ù—É–∂–µ–Ω API —Å function calling
- –ß—É—Ç—å –±–æ–ª—å—à–µ –∫–æ–¥–∞

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** Production, –Ω—É–∂–µ–Ω –∫–æ–Ω—Ç—Ä–æ–ª—å, –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è

### Custom Loop Agent

‚úÖ **–ü–ª—é—Å—ã:**
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å
- –õ—é–±–æ–π LLM
- –ü–æ–ª–Ω–∞—è –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è

‚ùå **–ú–∏–Ω—É—Å—ã:**
- –ë–æ–ª—å—à–µ –∫–æ–¥–∞
- –ù—É–∂–Ω–æ –ø–∞—Ä—Å–∏—Ç—å –æ—Ç–≤–µ—Ç—ã

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è, –ª–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **docs/AGENT_ARCHITECTURE.md**
   - –ü–æ–¥—Ä–æ–±–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤
   - –ü—Ä–∏–º–µ—Ä—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

2. **docs/AUTONOMOUS_AGENT_GUIDE.md**
   - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
   - Best practices
   - FAQ

3. **examples/autonomous_agent_example.py**
   - –†–∞–±–æ—á–∏–µ –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞
   - –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
   - –®–∞–±–ª–æ–Ω—ã —Ç—É–ª–∑–æ–≤

4. **src/agents/autonomous_agent.py**
   - –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å
   - –ê–≥–µ–Ω—Ç—Å–∫–∏–π —Ü–∏–∫–ª
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º

5. **src/agents/openai_agent.py**
   - OpenAI-compatible —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
   - Function calling
   - Tool registration

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ë–∞–∑–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

```python
agent = OpenAIAgent(api_key="...", base_url="...")
agent.register_tool("web_search", web_search_tool)
agent.register_tool("file_create", file_create_tool)

result = await agent.process({
    "text": "–°—Ç–∞—Ç—å—è –æ –Ω–µ–π—Ä–æ—Å–µ—Ç—è—Ö..."
})

# –ê–≥–µ–Ω—Ç —Å–∞–º:
# 1. –°–æ–∑–¥–∞—Å—Ç –ø–ª–∞–Ω
# 2. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç
# 3. –ú–æ–∂–µ—Ç —Å–¥–µ–ª–∞—Ç—å web_search
# 4. –°–æ–∑–¥–∞—Å—Ç —Ñ–∞–π–ª —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º
```

### –ü—Ä–∏–º–µ—Ä 2: –ö–∞—Å—Ç–æ–º–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

```python
agent = OpenAIAgent(
    api_key="...",
    instruction="""
    –¢—ã –∞–≥–µ–Ω—Ç –¥–ª—è –Ω–∞—É—á–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π.
    
    1. –°–æ–∑–¥–∞–π –ø–ª–∞–Ω (plan_todo)
    2. –ò–∑–≤–ª–µ–∫–∏ –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏—é –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
    3. –°–æ—Ö—Ä–∞–Ω–∏ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ
    
    –ò—Å–ø–æ–ª—å–∑—É–π —Ç—É–ª–∑—ã: analyze_content, file_create
    """
)

result = await agent.process({
    "text": "Research paper about deep learning..."
})
```

### –ü—Ä–∏–º–µ—Ä 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å KB

```python
# –°–æ–∑–¥–∞—Ç—å —Ç—É–ª–∑ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ KB
async def save_to_kb_tool(params: dict) -> dict:
    content = params["content"]
    return kb_manager.save_article(content)

agent.register_tool("save_to_kb", save_to_kb_tool)

# –ê–≥–µ–Ω—Ç –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π KB manager
result = await agent.process({
    "text": "–ö–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è..."
})
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ –ø—Ä–∏–º–µ—Ä–æ–≤

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install openai

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env
export OPENAI_API_KEY="your-key"
export OPENAI_BASE_URL="https://dashscope.aliyuncs.com/compatible-mode/v1"

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã
python examples/autonomous_agent_example.py
```

### –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤

```python
# tests/test_openai_agent.py
import pytest
from src.agents.openai_agent import OpenAIAgent

@pytest.mark.asyncio
async def test_agent_basic():
    agent = OpenAIAgent(api_key="test", base_url="test")
    
    async def mock_tool(params):
        return {"success": True}
    
    agent.register_tool("mock_tool", mock_tool)
    
    result = await agent.process({"text": "test"})
    
    assert "markdown" in result
    assert "metadata" in result
```

## Roadmap

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ ‚úÖ

- [x] –ë–∞–∑–æ–≤—ã–π AgentLoop
- [x] OpenAI-compatible —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- [x] Function calling –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [x] Tool registration
- [x] Error handling
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [x] –ü—Ä–∏–º–µ—Ä—ã

### –ü–ª–∞–Ω—ã üöß

- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ streaming
- [ ] Vision –º–æ–¥–µ–ª–∏ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- [ ] Parallel tool execution
- [ ] Auto-retry –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- [ ] Metrics –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- [ ] Web UI –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- [ ] –ë–æ–ª—å—à–µ –ø—Ä–∏–º–µ—Ä–æ–≤ —Ç—É–ª–∑–æ–≤
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MCP —Å–µ—Ä–≤–µ—Ä–∞–º–∏

## –í—ã–≤–æ–¥—ã

### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

1. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: –û—Ç –∂—ë—Å—Ç–∫–æ–≥–æ –ø–ª–∞–Ω–∞ –∫ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–º—É
2. **–ö–æ–Ω—Ç—Ä–æ–ª—å**: –û—Ç —á—ë—Ä–Ω–æ–≥–æ —è—â–∏–∫–∞ –∫ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ
3. **–ì–∏–±–∫–æ—Å—Ç—å**: –û—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ª–æ–≥–∏–∫–∏ –∫ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–π
4. **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –û—Ç –∑–∞–∫—Ä—ã—Ç–æ–π —Å–∏—Å—Ç–µ–º—ã –∫ –æ—Ç–∫—Ä—ã—Ç–æ–π

### –ö–∞–∫ —ç—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø—Ä–æ–µ–∫—Ç

#### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

- ‚úÖ –ü—Ä–æ—â–µ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ç—É–ª–∑—ã
- ‚úÖ –ü–æ–Ω—è—Ç–Ω–µ–µ –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã –∞–≥–µ–Ω—Ç–∞
- ‚úÖ –õ–µ–≥—á–µ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã
- ‚úÖ –ë–æ–ª—å—à–µ –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º

#### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

- ‚úÖ –ë–æ–ª–µ–µ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –∫ –∑–∞–¥–∞—á–∞–º
- ‚úÖ –ú–µ–Ω—å—à–µ –ª–∏—à–Ω–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π
- ‚úÖ –õ—É—á—à–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º**
   - –û–±–Ω–æ–≤–∏—Ç—å handlers –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –∞–≥–µ–Ω—Ç–∞
   - –°–æ–∑–¥–∞—Ç—å —Ç—É–ª–∑—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å KB
   - –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å QwenCodeAgent –Ω–∞ OpenAIAgent

2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - Unit —Ç–µ—Å—Ç—ã –¥–ª—è –∞–≥–µ–Ω—Ç–∞
   - Integration —Ç–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Ç—É–ª–∑–∞–º–∏
   - E2E —Ç–µ—Å—Ç—ã –≤ Telegram –±–æ—Ç–µ

3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤
   - Retry –ª–æ–≥–∏–∫–∞
   - Rate limiting

4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
   - –ú–µ—Ç—Ä–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏–π
   - –ê–Ω–∞–ª–∏–∑ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

## –°—Å—ã–ª–∫–∏

- [AGENT_ARCHITECTURE.md](docs/AGENT_ARCHITECTURE.md) - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- [AUTONOMOUS_AGENT_GUIDE.md](docs/AUTONOMOUS_AGENT_GUIDE.md) - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- [autonomous_agent_example.py](examples/autonomous_agent_example.py) - –ü—Ä–∏–º–µ—Ä—ã
- [OpenAI Function Calling](https://platform.openai.com/docs/guides/function-calling)
- [Qwen API Docs](https://help.aliyun.com/zh/dashscope/)

## –ö–æ–Ω—Ç—Ä–∏–±—É—Ü–∏—è

Pull requests –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è!

–î–ª—è –∫—Ä—É–ø–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π:
1. –û—Ç–∫—Ä–æ–π—Ç–µ issue –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch
3. –ù–∞–ø–∏—à–∏—Ç–µ —Ç–µ—Å—Ç—ã
4. –û–±–Ω–æ–≤–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
5. –°–æ–∑–¥–∞–π—Ç–µ PR

---

**–ê–≤—Ç–æ—Ä:** Cursor Agent  
**–î–∞—Ç–∞:** 2025-10-03  
**–í–µ—Ä—Å–∏—è:** 1.0.0
