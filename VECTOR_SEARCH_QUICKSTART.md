# –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ —Å –≤–µ–∫—Ç–æ—Ä–Ω—ã–º –ø–æ–∏—Å–∫–æ–º

–ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É —Å–∏—Å—Ç–µ–º—ã —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞.

## –ß—Ç–æ —ç—Ç–æ –¥–∞–µ—Ç?

- üîç **–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫**: –ø–æ–∏—Å–∫ –ø–æ —Å–º—ã—Å–ª—É, –∞ –Ω–µ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
- üöÄ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è**: –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–µ–∫—Ç–æ—Ä–∏–∑—É–µ—Ç—Å—è
- üéØ **–¢–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã**: –Ω–∞—Ö–æ–¥–∏—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –¥–∞–∂–µ –±–µ–∑ —Ç–æ—á–Ω–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è —Å–ª–æ–≤
- üåê **–ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å**: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–æ–≤

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
Bot ‚Üí MCP Hub ‚Üí Infinity (—ç–º–±–µ–¥–¥–∏–Ω–≥–∏) ‚Üí Qdrant (–≤–µ–∫—Ç–æ—Ä–Ω–∞—è –ë–î)
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ñ–∞–π–ª–æ–≤

```bash
# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cp .env.vector.example .env
cp config.example.yaml config.yaml

# –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö
mkdir -p data/qdrant_storage data/infinity_cache
```

### 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å `.env`, –º–∏–Ω–∏–º–∞–ª—å–Ω–æ –Ω—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å:

```env
# –í–∞—à Telegram –±–æ—Ç —Ç–æ–∫–µ–Ω
TELEGRAM_BOT_TOKEN=your_bot_token_here

# ID —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
ALLOWED_USER_IDS=123456789

# –ú–æ–¥–µ–ª—å –¥–ª—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ (–¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ + –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ)
INFINITY_MODEL=BAAI/bge-m3
```

### 3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å config.yaml

–í–∫–ª—é—á–∏—Ç—å –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –≤ `config.yaml`:

```yaml
# –í–∫–ª—é—á–∏—Ç—å –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫
VECTOR_SEARCH_ENABLED: true

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
VECTOR_EMBEDDING_PROVIDER: infinity
VECTOR_EMBEDDING_MODEL: BAAI/bge-m3
VECTOR_INFINITY_API_URL: http://infinity:7997

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Qdrant
VECTOR_STORE_PROVIDER: qdrant
VECTOR_QDRANT_URL: http://qdrant:6333
VECTOR_QDRANT_COLLECTION: knowledge_base
```

### 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose -f docker-compose.vector.yml up -d

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ (–¥–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏ ~1-2 –º–∏–Ω—É—Ç—ã)
docker-compose -f docker-compose.vector.yml logs -f infinity
```

### 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose -f docker-compose.vector.yml ps

# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω—ã:
# - tg-note-qdrant (healthy)
# - tg-note-infinity (healthy)
# - tg-note-hub (healthy)
# - tg-note-bot (running)
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ß–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞

1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –±–æ—Ç—É (—Ç–µ–∫—Å—Ç, PDF, DOCX –∏ —Ç.–¥.)
2. –ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Ö –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç
3. –ó–∞–¥–∞–≤–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å—ã - –±–æ—Ç –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫

### –ü—Ä–∏–º–µ—Ä

```
üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä—ã –≤ NLP?

ü§ñ –ë–æ—Ç: [–Ω–∞—Ö–æ–¥–∏—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π –∏—Å–ø–æ–ª—å–∑—É—è –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫]
```

## –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏

### –î–ª—è —Ä—É—Å—Å–∫–æ–≥–æ + –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```env
INFINITY_MODEL=BAAI/bge-m3
```

### –¢–æ–ª—å–∫–æ –¥–ª—è –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ (–±—ã—Å—Ç—Ä–µ–µ)

```env
INFINITY_MODEL=BAAI/bge-small-en-v1.5
```

### –î—Ä—É–≥–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã

| –ú–æ–¥–µ–ª—å | –Ø–∑—ã–∫–∏ | –ö–∞—á–µ—Å—Ç–≤–æ | –°–∫–æ—Ä–æ—Å—Ç—å |
|--------|-------|----------|----------|
| `BAAI/bge-m3` | –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–∞—è | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚ö°‚ö° |
| `BAAI/bge-small-en-v1.5` | English | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚ö°‚ö°‚ö° |
| `BAAI/bge-base-en-v1.5` | English | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚ö°‚ö° |

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –í—Å–µ –ª–æ–≥–∏
docker-compose -f docker-compose.vector.yml logs -f

# –¢–æ–ª—å–∫–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å
docker-compose -f docker-compose.vector.yml logs -f infinity
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ
docker-compose -f docker-compose.vector.yml restart

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å
docker-compose -f docker-compose.vector.yml restart infinity
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose -f docker-compose.vector.yml down

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ (–±—É–¥—å—Ç–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã!)
docker-compose -f docker-compose.vector.yml down -v
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ä–µ—Å—É—Ä—Å–∞–º

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **RAM**: 4 GB (—Å –º–æ–¥–µ–ª—å—é `bge-small`)
- **–î–∏—Å–∫**: 5 GB (–¥–ª—è –º–æ–¥–µ–ª–µ–π –∏ –¥–∞–Ω–Ω—ã—Ö)
- **CPU**: 2 —è–¥—Ä–∞

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **RAM**: 8 GB (—Å –º–æ–¥–µ–ª—å—é `bge-m3`)
- **–î–∏—Å–∫**: 10 GB
- **CPU**: 4 —è–¥—Ä–∞
- **GPU** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –£—Å–∫–æ—Ä—è–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –≤ 5-10 —Ä–∞–∑

## GPU —É—Å–∫–æ—Ä–µ–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–î–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –≤ `docker-compose.vector.yml`:

```yaml
infinity:
  deploy:
    resources:
      reservations:
        devices:
          - driver: nvidia
            count: 1
            capabilities: [gpu]
```

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- NVIDIA GPU
- nvidia-docker —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

## –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### Infinity –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞**: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä infinity –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∏ –¥–∞–π—Ç–µ –≤—Ä–µ–º—è –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É –º–æ–¥–µ–ª–∏ (1-2 –º–∏–Ω—É—Ç—ã)

```bash
docker-compose -f docker-compose.vector.yml logs infinity
```

### –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–∞–º—è—Ç–∏

**–ü—Ä–æ–±–ª–µ–º–∞**: Out of memory

**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ–Ω—å—à—É—é –º–æ–¥–µ–ª—å

```env
INFINITY_MODEL=BAAI/bge-small-en-v1.5
INFINITY_BATCH_SIZE=16
```

### Vector search not available

**–ü—Ä–æ–±–ª–µ–º–∞**: "Vector search is not available"

**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ config.yaml

```yaml
VECTOR_SEARCH_ENABLED: true
```

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: [docs_site/deployment/docker-vector-search.md](docs_site/deployment/docker-vector-search.md)

## –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

1. **Bot** –ø–æ–ª—É—á–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. **Bot** –≤—ã–∑—ã–≤–∞–µ—Ç `reindex_vector` —á–µ—Ä–µ–∑ MCP Hub
3. **MCP Hub** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç –≤ **Infinity** –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
4. **MCP Hub** —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤–µ–∫—Ç–æ—Ä—ã –≤ **Qdrant**
5. –ü—Ä–∏ –ø–æ–∏—Å–∫–µ **Bot** –≤—ã–∑—ã–≤–∞–µ—Ç `vector_search`
6. **MCP Hub** –ø–æ–ª—É—á–∞–µ—Ç —ç–º–±–µ–¥–¥–∏–Ω–≥ –∑–∞–ø—Ä–æ—Å–∞ –æ—Ç **Infinity**
7. **MCP Hub** –∏—â–µ—Ç –ø–æ—Ö–æ–∂–∏–µ –≤–µ–∫—Ç–æ—Ä—ã –≤ **Qdrant**
8. **Bot** –ø–æ–ª—É—á–∞–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

–ö–∞–∂–¥–∞—è –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Üí –æ—Ç–¥–µ–ª—å–Ω–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è –≤ Qdrant.

## AICODE-NOTE

- Bot —É–ø—Ä–∞–≤–ª—è–µ—Ç –ª–æ–≥–∏–∫–æ–π –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–∫–æ–≥–¥–∞ –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å, –∫–æ–≥–¥–∞ –∏—Å–∫–∞—Ç—å)
- MCP Hub –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (vector_search, reindex_vector)
- Infinity –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ (–ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Ç–µ–∫—Å—Ç –≤ –≤–µ–∫—Ç–æ—Ä—ã)
- Qdrant —Ö—Ä–∞–Ω–∏—Ç –≤–µ–∫—Ç–æ—Ä—ã (–æ—Ç–¥–µ–ª—å–Ω–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è –Ω–∞ –∫–∞–∂–¥—É—é –±–∞–∑—É –∑–Ω–∞–Ω–∏–π)
